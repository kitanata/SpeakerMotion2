{% extends 'talk_base.html' %}

{% block 'content' %}
<div id="talk">
    <div class="row">
        <div class="span3">
            <div class="row">
                <div class="span3">
                    <div class="well talk-photo">
                        {% if talk.photo %}
                            <img src="{{STATIC_URL}}img/photo/{{ talk.photo}}"></img>
                        {% else %}
                            <i class="icon-camera profile-placeholder"></i>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="span3">
                    <h3>Speakers</h3>
                    <ul class="speakers">
                        {% for speaker in talk.speakers.all %}
                            <li>
                                <div class="speaker well">
                                    {% if speaker.photo %}
                                        <img src="{{STATIC_URL}}img/photo/{{ speaker.photo}}"></img>
                                    {% else %}
                                        <i class="icon-camera profile-placeholder"></i>
                                    {% endif %}

                                    <div class="about">
                                        <h4>
                                            <a href="/speaker/{{speaker.user.username}}">
                                            {{ speaker.user.get_full_name }}
                                            </a>
                                        </h4>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            <div class="row">
                <div class="span3">
                    <div class="tags">
                        <h3>Tags</h3>
                        <ul>
                            {% for tag in talk.tags.all %}
                            <li>{{ tag.name }}</li>
                            {% endfor %}
                        </ul>

                        <form action="/talk/{{talk.id}}/tag/new/" method="POST">
                            {% csrf_token %}
                            <input name="tag" type="text" placeholder="My Tag"/>
                            <input class="btn btn-warning" type="submit" value="Tag this talk" />
                        </form>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="span3">
                    <h3>Location</h3>
                    <div class="location">
                        <h4>{{ talk.location.name }}</h4>
                        <p>{{talk.location.address}}</p>
                        <p>{{talk.location.city}}, {{ talk.location.state }} {{ talk.location.zip_code }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="span9">
            <div class="navbar pull-right" style="margin-top:10px">
                {% if user.get_profile in talk.speakers.all %}
                <div class="btn-group">
                    <a class="btn btn-warning" href="/talk/{{talk.id}}/edit">Edit</a>
                    <a class="btn btn-warning delete-talk" data-name="{{talk.name}}" data-id="{{talk.id}}" href="#delete-talk-popup">Delete</a>
                </div>
                {% endif %}
            </div>

            <h2 class="pull-left" style="width:560px;">{{ talk.name }}</h2>
            <div class="clearfix"></div>

            <p>{{ talk.date }}</p>

            <h3>Abstract</h3>
            <p>{{ talk.abstract }}</p>

            {% if talk.talkvideo_set.all %}
                <h3>Videos</h2>
                {% for video in talk.talkvideo_set.all %}
                    {% if video.video_type == "YOUTUBE" %}
                        <iframe width="300" height="225" src="{{ video.url_target }}" frameborder="0" allowfullscreen></iframe>
                    {% elif video.video_type == "VIMEO" %}
                        <iframe src="{{ video.url_target }}" width="300" height="225" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                    {% endif %}
                {% endfor %}
            {% endif %}

            <div class="comments">
                <h3>Comments</h3>

                <form class="add-comment-form" action="#" method="POST">
                    {% csrf_token %}
                    <textarea placeholder="Add your comment..."></textarea><br />
                    <input class="btn btn-warning" type="submit" value="Submit Comment" />
                </form>

                <ul>
                    <li>
                        <h4>Bob Loblaw said</h4>
                        <p>
                            Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris. Hi mindless mortuis soulless creaturas, imo evil stalking monstra adventus resi dentevil vultus comedat cerebella viventium. Qui animated corpse, cricket bat max brucks terribilem incessu zomby. The voodoo sacerdos flesh eater, suscitat mortuos comedere carnem virus. Zonbi tattered for solum oculi eorum defunctis go lum cerebro. Nescio brains an Undead zombies. Sicut malus putrid voodoo horror. Nigh tofth eliv ingdead.
                        </p>
                    </li>

                    <li>
                        <h4>Sue Summers said</h4>
                        <p>
                            Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris. Hi mindless mortuis soulless creaturas, imo evil stalking monstra adventus resi dentevil vultus comedat cerebella viventium. Qui animated corpse, cricket bat max brucks terribilem incessu zomby. The voodoo sacerdos flesh eater, suscitat mortuos comedere carnem virus. Zonbi tattered for solum oculi eorum defunctis go lum cerebro. Nescio brains an Undead zombies. Sicut malus putrid voodoo horror. Nigh tofth eliv ingdead.
                        </p>
                    </li>

                    <li>
                        <h4>Zee Spencer said</h4>
                        <p>
                            Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris. Hi mindless mortuis soulless creaturas, imo evil stalking monstra adventus resi dentevil vultus comedat cerebella viventium. Qui animated corpse, cricket bat max brucks terribilem incessu zomby. The voodoo sacerdos flesh eater, suscitat mortuos comedere carnem virus. Zonbi tattered for solum oculi eorum defunctis go lum cerebro. Nescio brains an Undead zombies. Sicut malus putrid voodoo horror. Nigh tofth eliv ingdead.
                        </p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- This contains the hidden content for inline calls -->
<div style='display:none'>
    <div id="delete-talk-popup" style="background-color:white; padding: 40px;">
        <h2 class="delete-talk-name"></h2>
        <div style="font-size: 18px;">
            <p>Are you sure you want to delete this talk?</p>
            <p><b>This operation cannot be undone.</b></p>
        </div>

        <a class="delete-confirm-link btn btn-danger" href="#" style="margin-top: 20px;">Yes. Delete this talk<a>
    </div>
</div>
{% endblock %}

{% block 'scripts' %}
<script type="text/javascript">
    $('.delete-talk').colorbox({inline: true, width:"300px"});

    $('.delete-talk').click(function(el){
        var sel = $(el.currentTarget)

        $('.delete-talk-name').text(sel.data('name'))
        $('.delete-confirm-link').attr('href', "/talk/" + sel.data('id') + "/delete/")
    });
</script>
{% endblock %}
